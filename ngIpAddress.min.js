!function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(e,r,i,n){function l(e){e?(c="boolean"==typeof e.requirePort&&e.requirePort,a=c||"boolean"==typeof e.allowPort&&e.allowPort):(a=!1,c=!1),a?n.$parsers[0](n.$viewValue):n.$setViewValue(n.$viewValue.replace(g,""))}function t(e){(e.which<46&&0!==e.which&&8!=e.which&&13!=e.which||47==e.which||e.which>58||58==e.which&&!a)&&e.preventDefault()}function s(e){if(!e)return n.$setValidity("ipAddress",!0),e;var r=!0,i=null;e=e.replace(p,""),e=e.replace(u,".");var l=e.split("."),t=l.length;4>t?r=!1:t>4&&(l.length=4,t=4);for(var s=0;t>s;s++){var h=l[s];if(a)if(3>s)h=h.replace(g,"");else if(h=h.replace(f,""),-1!=h.indexOf(":")){var w=h.split(":");h=w[0],i=w[1].replace(o,"").substring(0,5),(!i||i>65535)&&(r=!1)}else c&&(r=!1);h.length>1?(h=h.replace(o,"").substring(0,3),h>255&&(r=!1)):h||(r=!1),l[s]=h}return e=l.join("."),null!==i&&(e+=":"+i),n.$setValidity("ipAddress",r),n.$setViewValue(e),n.$render(),e}if(n){var a=!1,c=!1,o=new RegExp("^0","g"),p=new RegExp("^\\.","g"),u=new RegExp("\\.\\.+","g"),g=new RegExp(":","g"),f=new RegExp("^:","g");e.$watchCollection("config",l),r.bind("keypress",t),n.$parsers.push(s)}}}}angular.module("ng-ip-address",[]).directive("ngIpAddress",e)}();