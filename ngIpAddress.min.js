!function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(e,i,r,n){function l(e){e?(c="boolean"==typeof e.requirePort&&e.requirePort,s=c||"boolean"==typeof e.allowPort&&e.allowPort):(s=!1,c=!1),s||!n.$viewValue?n.$parsers[0](n.$viewValue):n.$setViewValue(n.$viewValue.replace(g,""))}function t(e){(e.which<46&&0!==e.which&&8!=e.which&&13!=e.which||47==e.which||e.which>58||58==e.which&&!s)&&e.preventDefault()}function a(e){if(!e)return n.$setValidity("ipAddress",!0),e;var i=!0,r=null;e=e.replace(p,""),e=e.replace(u,".");var l=e.split("."),t=l.length;4>t?i=!1:t>4&&(l.length=4,t=4);for(var a=0;t>a;a++){var f=l[a];if(s)if(3>a)f=f.replace(g,"");else if(f=f.replace(w,""),-1!=f.indexOf(":")){var h=f.split(":");f=h[0],r=h[1].replace(o,"").substring(0,5),(!r||r>65535)&&(i=!1)}else c&&(i=!1);f.length>1?(f=f.replace(o,"").substring(0,3),f>255&&(i=!1)):f||(i=!1),l[a]=f}return e=l.join("."),null!==r&&(e+=":"+r),n.$setValidity("ipAddress",i),n.$setViewValue(e),n.$render(),e}if(n){var s=!1,c=!1,o=new RegExp("^0","g"),p=new RegExp("^\\.","g"),u=new RegExp("\\.\\.+","g"),g=new RegExp(":","g"),w=new RegExp("^:","g");e.$watchCollection("config",l),i.bind("keypress",t),n.$parsers.push(a)}}}}angular.module("ng-ip-address",[]).directive("ngIpAddress",e)}();