!function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(e,r,i,n){function l(e){e?(o="boolean"==typeof e.requirePort&&e.requirePort,a=o||"boolean"==typeof e.allowPort&&e.allowPort):(a=!1,o=!1),a?n.$parsers[0](n.$viewValue):n.$setViewValue(n.$viewValue.replace(g,""))}function t(e){(e.which<46||47==e.which||e.which>58||58==e.which&&!a)&&e.preventDefault()}function s(e){if(!e)return n.$setValidity("ipAddress",!0),e;var r=!0,i=null;e=e.replace(c,""),e=e.replace(u,".");var l=e.split("."),t=l.length;4>t?r=!1:t>4&&(l.length=4,t=4);for(var s=0;t>s;s++){var d=l[s];if(a)if(3>s)d=d.replace(g,"");else if(d=d.replace(f,""),-1!=d.indexOf(":")){var w=d.split(":");d=w[0],i=w[1].replace(p,"").substring(0,5),(!i||i>65535)&&(r=!1)}else o&&(r=!1);d.length>1?(d=d.replace(p,"").substring(0,3),d>255&&(r=!1)):d||(r=!1),l[s]=d}return e=l.join("."),null!==i&&(e+=":"+i),n.$setValidity("ipAddress",r),n.$setViewValue(e),n.$render(),e}if(n){var a=!1,o=!1,p=new RegExp("^0","g"),c=new RegExp("^\\.","g"),u=new RegExp("\\.\\.+","g"),g=new RegExp(":","g"),f=new RegExp("^:","g");e.$watchCollection("config",l),r.bind("keypress",t),n.$parsers.push(s)}}}}angular.module("ng-ip-address",[]).directive("ngIpAddress",e)}();